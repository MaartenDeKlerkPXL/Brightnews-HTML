<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abonnementen âœ¨ Bright News</title>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/pages/abonnementen.css">
</head>
<body>
<header>
    <nav class="container">
        <div class="nav-left-group">
            <div class="dropdown language-picker">
                <button class="dropbtn" id="current-lang">
                    ğŸ‡ºğŸ‡¸ English <span class="arrow">â–¼</span>
                </button>
                <div class="dropdown-content">
                    <a href="#" onclick="wisselTaal('en', 'ğŸ‡ºğŸ‡¸ English', event)">ğŸ‡ºğŸ‡¸ English</a>
                    <a href="#" onclick="wisselTaal('nl', 'ğŸ‡³ğŸ‡± Nederlands', event)">ğŸ‡³ğŸ‡± Nederlands</a>
                    <a href="#" onclick="wisselTaal('de', 'ğŸ‡©ğŸ‡ª Deutsch', event)">ğŸ‡©ğŸ‡ª Deutsch</a>
                    <a href="#" onclick="wisselTaal('fr', 'ğŸ‡«ğŸ‡· FranÃ§ais', event)">ğŸ‡«ğŸ‡· FranÃ§ais</a>
                    <a href="#" onclick="wisselTaal('es', 'ğŸ‡ªğŸ‡¸ EspaÃ±ol', event)">ğŸ‡ªğŸ‡¸ EspaÃ±ol</a>
                </div>
            </div>

            <div class="logo">Bright<span>News</span></div>
        </div>
        <button class="hamburger" onclick="toggleMobileMenu()" aria-label="Menu openen">
            <span></span><span></span><span></span>
        </button>
        <ul class="nav-links" id="mobileMenu">
            <li><a href="index.html">Home</a></li>
            <li><a href="over-ons.html">Over Ons</a></li>
            <li><a href="abonnementen.html">Abonnementen</a></li>

            <li class="nav-profile-desktop">
                <a href="profiel.html" class="profile-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </a>
            </li>

            <li class="nav-profile-mobile">
                <a href="profiel.html" class="profile-link-text">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    Mijn Profiel
                </a>
            </li>
        </ul>

    </nav>
</header>

<main class="pricing-page-wrapper">
    <section class="pricing-intro">
        <h1>Kies jouw dosis zonneschijn â˜€ï¸</h1>
    </section>

    <section class="pricing-grid container">
        <div class="price-card">
            <h2>Sparkle</h2>
            <div class="price-amount">â‚¬0<span>/altijd</span></div>
            <ul class="feature-list">
                <li>âœ… Dagelijkse koppen</li>
                <li class="disabled">âŒ Volledige artikelen</li>
                <li class="disabled">âŒ Reclamevrij</li>
                <li>âœ… 5 talen beschikbaar</li>
            </ul>
            <button onclick="startCheckout('sparkle')" class="btn-secondary">Kies Gratis</button>
        </div>

        <div class="price-card popular">
            <span class="popular-badge">Meest gekozen</span>
            <h2>Glow</h2>
            <div class="price-amount">â‚¬2,95<span>/maand</span></div>
            <ul class="feature-list">
                <li>âœ… Onbeperkt artikelen</li>
                <li>âœ… 100% Reclamevrij</li>
                <li>âœ… Exclusieve AI-insights</li>
                <li>âœ… Direct opzegbaar</li>
            </ul>
            <button onclick="startCheckout('glow')" class="btn-primary">Start nu</button>
        </div>

        <div class="price-card">
            <h2>Shine</h2>
            <div class="price-amount">â‚¬24,95<span>/jaar</span></div>
            <ul class="feature-list">
                <li>âœ… Alles van Glow</li>
                <li>âœ… Bespaar â‚¬10 per jaar</li>
                <li>âœ… Steun onze missie</li>
                <li>âœ… Jaarlijks gefactureerd</li>
            </ul>
            <button onclick="startCheckout('shine')" class="btn-secondary">Kies Jaarlijks</button>
        </div>
    </section>
</main>
<footer>
    <p>Verspreid het licht. âœ¨ Bright News 2026</p>
</footer>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
    const SUPABASE_URL = 'https://rquuqypgaannrakdrabj.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJxdXVxeXBnYWFubnJha2RyYWJqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA4MTQyODUsImV4cCI6MjA4NjM5MDI4NX0.-H5ZIcLXBflqKvC0VQGlVGIX29G-nceC9ak5IrhJCzg';
    window.supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    async function startCheckout(plan) {
        console.log("Checkout gestart voor:", plan);

        // Haal de huidige gebruiker op
        const { data: { user } } = await window.supabaseClient.auth.getUser();

        // Als er geen gebruiker is, stuur ze naar de login pagina
        if (!user) {
            alert("Log eerst even in (of maak een account) om je abonnement te activeren! âœ¨");
            window.location.href = 'profiel.html';
            return;
        }

        // Jouw Stripe links (vul hier je eigen links in)
        const stripeLinks = {
            'glow': 'https://buy.stripe.com/test_dRmaEZ9Zjcgmb3g7Lv5c400',
            'shine': 'https://buy.stripe.com/test_aFafZjefzfsy3AO9TD5c401'
        };

        if (plan === 'sparkle') {
            window.location.href = 'index.html';
            return;
        }

        const baseLink = stripeLinks[plan];
        if (baseLink) {
            // We voegen het emailadres alvast toe aan Stripe voor het gemak van de klant
            const finalUrl = baseLink + "?prefilled_email=" + encodeURIComponent(user.email);
            window.location.href = finalUrl;
        } else {
            console.error("Geen Stripe link gevonden voor dit plan.");
        }
    }
</script>
<script>
    function toggleMobileMenu() {
        const menu = document.getElementById('mobileMenu');
        const hamburger = document.querySelector('.hamburger');

        if (menu) {
            menu.classList.toggle('active');
            console.log("Menu status:", menu.classList.contains('active') ? "Open" : "Dicht");
        } else {
            console.error("Fout: Element #mobileMenu niet gevonden!");
        }
    }
</script>
</body>
</html>